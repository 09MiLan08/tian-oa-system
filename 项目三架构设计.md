tianfu-oa-system 项目架构设计文档
 
一、项目概述
 
1. 项目名称
 
tianfu-oa-system（天府OA系统）
 
2. 核心定位
 
基于 Django + Vue 技术栈构建的企业级办公自动化系统，支持用户管理、公告发布、部门管理、审批流程等核心办公场景，采用前后端分离的开发与部署模式。
 
3. 技术栈选型
 
- 后端：Python + Django（Web框架）、Django REST Framework（API开发）
- 前端：Vue.js（前端框架）、Webpack（构建工具）、路由插件（页面跳转）
- 开发环境：Python虚拟环境（venv）、Node.js（前端依赖管理）
- 依赖管理：后端用requirements.txt、前端用package.json
 
二、项目整体结构
 
项目分为后端服务（tianfu-oa-system）和前端应用（oa-frontend）两个独立模块，通过API接口实现数据交互。
 
三、后端模块结构（tianfu-oa-system）
 
1. 根目录核心文件夹
 
- tianfu_oa：Django项目核心配置目录，存放全局配置文件
- apps：功能模块存放目录，包含用户、公告、部门、审批等核心业务模块
- static：存放CSS、JS等静态文件，提供后端静态资源支持
- templates：存放HTML模板文件（后端渲染页面时使用）
- utils：存放通用工具函数，封装可复用的业务逻辑
- venv：Python虚拟环境目录，自动生成，无需手动修改
 
2. 关键文件夹详细说明
 
（1）tianyfu_oa 文件夹（核心配置）
 
- init.py：Python包标识文件，声明该目录为Python包
- settings.py：全局配置文件，包含数据库连接、应用注册、中间件、静态资源路径等配置
- urls.py：项目总路由文件，将客户端请求分发到对应功能模块的路由
- wsgi.py / asgi.py：Web服务器部署接口文件，支持WSGI/ASGI协议，用于项目上线部署
- manage.py（根目录文件）：Django项目管理工具，支持启动服务、数据库迁移、创建应用等操作
 
（2）apps 文件夹（功能模块）
 
按业务功能拆分模块，每个模块包含以下文件：
 
- 核心模块：用户模块、公告模块、部门模块、审批模块
- 每个模块下的文件：
- migrations：存放数据库迁移文件，记录数据模型的变更历史
- init.py：Python包标识文件
- admin.py：配置Django后台管理系统，实现数据模型的可视化管理
- models.py：定义数据模型，映射数据库表结构（如用户表、公告表等）
- serializers.py：定义API数据交互格式，实现数据模型与JSON的序列化/反序列化
- urls.py：定义本模块的路由规则，指定请求路径与视图函数的映射
- views.py：编写核心业务逻辑，处理客户端请求并返回响应数据
 
（3）utils 文件夹（工具函数）
 
- 核心文件：auth_utils.py，存放权限验证相关工具函数（如登录验证、角色权限判断）
- 设计思路：封装通用功能，降低模块间耦合，提高代码复用率
 
（4）根目录关键配置文件
 
- requirements.txt：后端项目依赖清单，记录所有第三方库及版本，确保开发环境一致
 
四、前端模块结构（oa-frontend）
 
1. 核心文件夹
 
- node_modules：存放前端项目依赖的第三方包（如Vue、路由插件），npm install自动生成，不提交到Git仓库
- public：存放无需Webpack处理的静态资源（如index.html、图标），直接复制到打包后的dist目录
- src（项目核心代码目录）：
- assets：存放需要Webpack打包的静态资源（如logo图片、样式文件），编译后嵌入最终代码
- components：存放可复用Vue组件（如通用按钮、表单），支持多页面调用
- router：存放路由配置文件（index.js），管理页面跳转规则（如登录页跳转到审批页）
- views：存放页面级组件（如LoginPage.vue登录页、ApprovalCreate.vue审批创建页、公告页、部门页），每个文件对应一个完整页面
- App.vue：项目根组件，所有页面组件均嵌套在该组件内，定义页面布局框架
- main.js：项目入口文件，初始化Vue实例、挂载根组件、引入全局依赖（如路由、样式）
 
2. 前端配置文件
 
- .babelrc / babel.config.js：Babel配置文件，将ES6+语法转换为浏览器兼容的ES5语法
- .gitignore：指定Git忽略的文件/文件夹（如node_modules、dist），避免提交冗余文件
- package.json：前端项目配置文件，记录项目名称、版本、依赖包、脚本命令（如npm run serve启动服务）
- package-lock.json：锁定依赖包版本，确保不同环境下安装的依赖一致
- vue.config.js：Vue项目自定义配置文件，可配置端口、代理、打包路径等
 
五、前后端交互流程
 
- 1. 前端通过路由跳转到对应页面（如审批创建页）
- 2. 前端页面通过API请求调用后端接口（如获取部门列表、提交审批数据）
- 3. 后端路由接收请求，通过views.py处理业务逻辑，调用models.py操作数据库
- 4. 后端通过serializers.py将数据序列化为JSON格式，返回给前端
- 5. 前端接收响应数据，渲染页面组件，展示给用户
 
六、部署与运行说明
 
1. 后端运行步骤
 
- 1. 创建并激活Python虚拟环境（venv）
- 2. 安装依赖：pip install -r requirements.txt
- 3. 执行数据库迁移：python manage.py makemigrations && python manage.py migrate
- 4. 启动服务：python manage.py runserver
- 5. 访问地址：http://127.0.0.1:8000（默认端口）
 
2. 前端运行步骤
 
- 1. 安装Node.js环境
- 2. 安装依赖：npm install
- 3. 启动开发服务：npm run serve
- 4. 访问地址：http://127.0.0.1:8080（默认端口）
- 5. 打包部署：npm run build，生成dist目录，部署到Web服务器（如Nginx）
 
七、扩展性设计
 
- 1. 功能扩展：新增业务模块（如考勤、报销）时，后端在apps目录下新建模块，前端在views/components目录下新增对应组件和路由
- 2. 技术扩展：支持集成状态管理工具（如Vuex）、UI组件库（如Element Plus）、文件上传、第三方登录（如企业微信登录）
- 3. 部署扩展：支持Docker容器化部署、云服务器部署、CI/CD自动构建部署
 
